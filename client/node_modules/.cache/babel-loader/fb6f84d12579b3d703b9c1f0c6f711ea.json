{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Evalds\\\\Documents\\\\Portfolio_1\\\\client\\\\src\\\\context\\\\basket\\\\basketState.js\";\nimport { ADD_TO_BASKET, GET_BASKET } from '../types';\nimport React, { useReducer } from 'react';\nimport BasketContext from './basketContext';\nimport basketReducer from './basketReducer';\nimport axios from 'axios';\nimport BasketItem from '../../components/basket/BasketItem';\naxios.defaults.withCredentials = true;\n\nconst BasketState = props => {\n  const initialState = {\n    basket: null\n  };\n  const [state, dispatch] = useReducer(basketReducer, initialState); //Add item to basket\n\n  const addToBasket = async id => {\n    try {\n      const res = await axios.put(`/api/v1/basket/${id}/addtobasket`);\n      dispatch({\n        type: ADD_TO_BASKET\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }; //Add item to basket\n\n\n  const getBasketItems = async basketItems => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const basket = {\n      basket: basketItems\n    };\n\n    try {\n      const res = await axios.get(`/api/v1/basket/getitems`, basket, config);\n      dispatch({\n        type: GET_BASKET,\n        payload: res.data.data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(BasketContext.Provider, {\n    value: {\n      basket: state.basket,\n      addToBasket,\n      getBasketItems\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default BasketState;","map":{"version":3,"sources":["C:/Users/Evalds/Documents/Portfolio_1/client/src/context/basket/basketState.js"],"names":["ADD_TO_BASKET","GET_BASKET","React","useReducer","BasketContext","basketReducer","axios","BasketItem","defaults","withCredentials","BasketState","props","initialState","basket","state","dispatch","addToBasket","id","res","put","type","error","console","log","getBasketItems","basketItems","config","headers","get","payload","data","children"],"mappings":";AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAA0C,UAA1C;AACA,OAAOC,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,oCAAvB;AACAD,KAAK,CAACE,QAAN,CAAeC,eAAf,GAAiC,IAAjC;;AAEA,MAAMC,WAAW,GAAIC,KAAD,IAAW;AAC7B,QAAMC,YAAY,GAAG;AACnBC,IAAAA,MAAM,EAAE;AADW,GAArB;AAIA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBZ,UAAU,CAACE,aAAD,EAAgBO,YAAhB,CAApC,CAL6B,CAM7B;;AACA,QAAMI,WAAW,GAAG,MAAOC,EAAP,IAAc;AAChC,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMZ,KAAK,CAACa,GAAN,CAAW,kBAAiBF,EAAG,cAA/B,CAAlB;AAEAF,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAEpB;AAAR,OAAD,CAAR;AACD,KAJD,CAIE,OAAOqB,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GARD,CAP6B,CAgB7B;;;AACA,QAAMG,cAAc,GAAG,MAAOC,WAAP,IAAuB;AAC5C,UAAMC,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AADI,KAAf;AAKA,UAAMd,MAAM,GAAG;AAAEA,MAAAA,MAAM,EAAEY;AAAV,KAAf;;AACA,QAAI;AACF,YAAMP,GAAG,GAAG,MAAMZ,KAAK,CAACsB,GAAN,CAAW,yBAAX,EAAqCf,MAArC,EAA6Ca,MAA7C,CAAlB;AAEAX,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAEnB,UAAR;AAAoB4B,QAAAA,OAAO,EAAEX,GAAG,CAACY,IAAJ,CAASA;AAAtC,OAAD,CAAR;AACD,KAJD,CAIE,OAAOT,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAdD;;AAgBA,sBACE,oBAAC,aAAD,CAAe,QAAf;AACE,IAAA,KAAK,EAAE;AACLR,MAAAA,MAAM,EAAEC,KAAK,CAACD,MADT;AAELG,MAAAA,WAFK;AAGLQ,MAAAA;AAHK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOGb,KAAK,CAACoB,QAPT,CADF;AAWD,CA5CD;;AA8CA,eAAerB,WAAf","sourcesContent":["import { ADD_TO_BASKET, GET_BASKET } from '../types';\r\nimport React, { useReducer } from 'react';\r\nimport BasketContext from './basketContext';\r\nimport basketReducer from './basketReducer';\r\nimport axios from 'axios';\r\nimport BasketItem from '../../components/basket/BasketItem';\r\naxios.defaults.withCredentials = true;\r\n\r\nconst BasketState = (props) => {\r\n  const initialState = {\r\n    basket: null,\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(basketReducer, initialState);\r\n  //Add item to basket\r\n  const addToBasket = async (id) => {\r\n    try {\r\n      const res = await axios.put(`/api/v1/basket/${id}/addtobasket`);\r\n\r\n      dispatch({ type: ADD_TO_BASKET });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  //Add item to basket\r\n  const getBasketItems = async (basketItems) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n    const basket = { basket: basketItems };\r\n    try {\r\n      const res = await axios.get(`/api/v1/basket/getitems`, basket, config);\r\n\r\n      dispatch({ type: GET_BASKET, payload: res.data.data });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <BasketContext.Provider\r\n      value={{\r\n        basket: state.basket,\r\n        addToBasket,\r\n        getBasketItems,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </BasketContext.Provider>\r\n  );\r\n};\r\n\r\nexport default BasketState;\r\n"]},"metadata":{},"sourceType":"module"}