{"ast":null,"code":"(function () {\n  var _elementsModal_stripe;\n\n  var _elementsModal_HOST_URL = '';\n\n  function init(content, paymentIntent) {\n    var amount = calculateDisplayAmountFromCurrency(paymentIntent);\n    var modal = document.createElement('div');\n    modal.className = 'ElementsModal--modal';\n    modal.innerHTML = `\n      <div class=\"ElementsModal--modal-content\">\n      <div class=\"ElementsModal--top-banner\">\n        <div class=\"ElementsModal--sales-info\">\n          <div class=\"ElementsModal--top\">\n            <div class=\"ElementsModal--company\">${content.businessName || ''}</div>\n            <button class=\"ElementsModal--close\" onClick=\"window.elementsModal.toggleElementsModalVisibility()\">\n              <svg\n                width=\"20px\"\n                height=\"20px\"\n                viewBox=\"0 0 20 20\"\n                version=\"1.1\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              >\n                <defs>\n                  <path\n                    d=\"M10,8.8766862 L13.6440403,5.2326459 C13.9542348,4.92245137 14.4571596,4.92245137 14.7673541,5.2326459 C15.0775486,5.54284044 15.0775486,6.04576516 14.7673541,6.3559597 L11.1238333,9.99948051 L14.7673541,13.6430016 C15.0775486,13.9531961 15.0775486,14.4561209 14.7673541,14.7663154 C14.4571596,15.0765099 13.9542348,15.0765099 13.6440403,14.7663154 L10,11.1222751 L6.3559597,14.7663154 C6.04576516,15.0765099 5.54284044,15.0765099 5.2326459,14.7663154 C4.92245137,14.4561209 4.92245137,13.9531961 5.2326459,13.6430016 L8.87616671,9.99948051 L5.2326459,6.3559597 C4.92245137,6.04576516 4.92245137,5.54284044 5.2326459,5.2326459 C5.54284044,4.92245137 6.04576516,4.92245137 6.3559597,5.2326459 L10,8.8766862 Z\"\n                    id=\"path-1\"\n                  ></path>\n                </defs>\n                <g\n                  id=\"Payment-recipes\"\n                  stroke=\"none\"\n                  stroke-width=\"1\"\n                  fill=\"none\"\n                  fill-rule=\"evenodd\"\n                >\n                  <g\n                    id=\"Elements-Popup\"\n                    transform=\"translate(-816.000000, -97.000000)\"\n                  >\n                    <g id=\"close-btn\" transform=\"translate(816.000000, 97.000000)\">\n                      <circle\n                        id=\"Oval\"\n                        fill-opacity=\"0.3\"\n                        fill=\"#AEAEAE\"\n                        cx=\"10\"\n                        cy=\"10\"\n                        r=\"10\"\n                      ></circle>\n                      <mask id=\"mask-2\" fill=\"white\">\n                        <use xlink:href=\"#path-1\"></use>\n                      </mask>\n                      <use\n                        id=\"Mask\"\n                        fill-opacity=\"0.5\"\n                        fill=\"#FFFFFF\"\n                        opacity=\"0.5\"\n                        xlink:href=\"#path-1\"\n                      ></use>\n                    </g>\n                  </g>\n                </g>\n              </svg>\n            </button>\n          </div>\n          <div class=\"ElementsModal--product ElementsModal--details\">${content.productName || ''}</div>\n          <div class=\"ElementsModal--price ElementsModal--details\">${amount}</div>\n          <div class=\"ElementsModal--email ElementsModal--details\">${content.customerEmail || ''}</div>\n        </div>\n      </div>\n      <div class=\"ElementsModal--payment-details\">\n        <form\n          class=\"ElementsModal--payment-form\"\n          id=\"payment-form\"\n        >\n          <div class=\"form-row\">\n            <div class=\"ElementsModal--forms\">\n              <div id=\"payment-request-section\" class=\"StripeElement--payment-request\">\n                <div id=\"payment-request-button\" class=\"StripeElement--payment-request-button\">\n                <!-- A Stripe Element will be inserted here. -->\n                </div>\n                <!-- Used to display form errors. -->\n                <div\n                  id=\"paymentRequest-errors\"\n                  class=\"ElementsModal--error-message\"\n                  role=\"alert\"\n                ></div>\n                <div class=\"ElementsModal--form-divider\">\n                    <span class=\"ElementsModal--form-divider-text\">Or pay with card</span>\n                </div>\n              </div>\n              <div class=\"ElementsModal--form\">\n                <label for=\"ElementsModal--card-element\">\n                  <span class=\"ElementsModal--form-label spacer\"\n                    >Card details</span\n                  >\n                  <div class=\"StripeElement--card\" id=\"card-element\">\n                    <!-- A Stripe Element will be inserted here. -->\n                  </div>\n                </label>\n                <!-- Used to display form errors. -->\n                <div\n                  id=\"card-errors\"\n                  class=\"ElementsModal--error-message\"\n                  role=\"alert\"\n                ></div>\n              </div>\n              <div class=\"ElementsModal--form\">\n                <label class=\"select\">\n                  <span class=\"ElementsModal--form-label spacer\"\n                    >Country or region</span\n                  >\n                  <div id=\"country\" class=\"ElementsModal--form-select\">\n                    <select name=\"country\" autocomplete=\"billing country\" aria-label=\"Country or region\">\n                    <option value=\"AF\">Afghanistan</option\n                    ><option value=\"AX\">Åland Islands</option\n                    ><option value=\"AL\">Albania</option\n                    ><option value=\"DZ\">Algeria</option\n                    ><option value=\"AD\">Andorra</option\n                    ><option value=\"AO\">Angola</option\n                    ><option value=\"AI\">Anguilla</option\n                    ><option value=\"AQ\">Antarctica</option\n                    ><option value=\"AG\">Antigua &amp; Barbuda</option\n                    ><option value=\"AR\">Argentina</option\n                    ><option value=\"AM\">Armenia</option\n                    ><option value=\"AW\">Aruba</option\n                    ><option value=\"AC\">Ascension Island</option\n                    ><option value=\"AU\">Australia</option\n                    ><option value=\"AT\">Austria</option\n                    ><option value=\"AZ\">Azerbaijan</option\n                    ><option value=\"BS\">Bahamas</option\n                    ><option value=\"BH\">Bahrain</option\n                    ><option value=\"BD\">Bangladesh</option\n                    ><option value=\"BB\">Barbados</option\n                    ><option value=\"BY\">Belarus</option\n                    ><option value=\"BE\">Belgium</option\n                    ><option value=\"BZ\">Belize</option\n                    ><option value=\"BJ\">Benin</option\n                    ><option value=\"BM\">Bermuda</option\n                    ><option value=\"BT\">Bhutan</option\n                    ><option value=\"BO\">Bolivia</option\n                    ><option value=\"BA\">Bosnia &amp; Herzegovina</option\n                    ><option value=\"BW\">Botswana</option\n                    ><option value=\"BV\">Bouvet Island</option\n                    ><option value=\"BR\">Brazil</option\n                    ><option value=\"IO\">British Indian Ocean Territory</option\n                    ><option value=\"VG\">British Virgin Islands</option\n                    ><option value=\"BN\">Brunei</option\n                    ><option value=\"BG\">Bulgaria</option\n                    ><option value=\"BF\">Burkina Faso</option\n                    ><option value=\"BI\">Burundi</option\n                    ><option value=\"KH\">Cambodia</option\n                    ><option value=\"CM\">Cameroon</option\n                    ><option value=\"CA\">Canada</option\n                    ><option value=\"CV\">Cape Verde</option\n                    ><option value=\"BQ\">Caribbean Netherlands</option\n                    ><option value=\"KY\">Cayman Islands</option\n                    ><option value=\"CF\">Central African Republic</option\n                    ><option value=\"TD\">Chad</option\n                    ><option value=\"CL\">Chile</option\n                    ><option value=\"CN\">China</option\n                    ><option value=\"CO\">Colombia</option\n                    ><option value=\"KM\">Comoros</option\n                    ><option value=\"CG\">Congo - Brazzaville</option\n                    ><option value=\"CD\">Congo - Kinshasa</option\n                    ><option value=\"CK\">Cook Islands</option\n                    ><option value=\"CR\">Costa Rica</option\n                    ><option value=\"CI\">Côte d’Ivoire</option\n                    ><option value=\"HR\">Croatia</option\n                    ><option value=\"CW\">Curaçao</option\n                    ><option value=\"CY\">Cyprus</option\n                    ><option value=\"CZ\">Czechia</option\n                    ><option value=\"DK\">Denmark</option\n                    ><option value=\"DJ\">Djibouti</option\n                    ><option value=\"DM\">Dominica</option\n                    ><option value=\"DO\">Dominican Republic</option\n                    ><option value=\"EC\">Ecuador</option\n                    ><option value=\"EG\">Egypt</option\n                    ><option value=\"SV\">El Salvador</option\n                    ><option value=\"GQ\">Equatorial Guinea</option\n                    ><option value=\"ER\">Eritrea</option\n                    ><option value=\"EE\">Estonia</option\n                    ><option value=\"ET\">Ethiopia</option\n                    ><option value=\"FK\">Falkland Islands</option\n                    ><option value=\"FO\">Faroe Islands</option\n                    ><option value=\"FJ\">Fiji</option\n                    ><option value=\"FI\">Finland</option\n                    ><option value=\"FR\">France</option\n                    ><option value=\"GF\">French Guiana</option\n                    ><option value=\"PF\">French Polynesia</option\n                    ><option value=\"TF\">French Southern Territories</option\n                    ><option value=\"GA\">Gabon</option\n                    ><option value=\"GM\">Gambia</option\n                    ><option value=\"GE\">Georgia</option\n                    ><option value=\"DE\">Germany</option\n                    ><option value=\"GH\">Ghana</option\n                    ><option value=\"GI\">Gibraltar</option\n                    ><option value=\"GR\">Greece</option\n                    ><option value=\"GL\">Greenland</option\n                    ><option value=\"GD\">Grenada</option\n                    ><option value=\"GP\">Guadeloupe</option\n                    ><option value=\"GU\">Guam</option\n                    ><option value=\"GT\">Guatemala</option\n                    ><option value=\"GG\">Guernsey</option\n                    ><option value=\"GN\">Guinea</option\n                    ><option value=\"GW\">Guinea-Bissau</option\n                    ><option value=\"GY\">Guyana</option\n                    ><option value=\"HT\">Haiti</option\n                    ><option value=\"HN\">Honduras</option\n                    ><option value=\"HK\">Hong Kong SAR China</option\n                    ><option value=\"HU\">Hungary</option\n                    ><option value=\"IS\">Iceland</option\n                    ><option value=\"IN\">India</option\n                    ><option value=\"ID\">Indonesia</option\n                    ><option value=\"IR\">Iran</option\n                    ><option value=\"IQ\">Iraq</option\n                    ><option value=\"IE\">Ireland</option\n                    ><option value=\"IM\">Isle of Man</option\n                    ><option value=\"IL\">Israel</option\n                    ><option value=\"IT\">Italy</option\n                    ><option value=\"JM\">Jamaica</option\n                    ><option value=\"JP\">Japan</option\n                    ><option value=\"JE\">Jersey</option\n                    ><option value=\"JO\">Jordan</option\n                    ><option value=\"KZ\">Kazakhstan</option\n                    ><option value=\"KE\">Kenya</option\n                    ><option value=\"KI\">Kiribati</option\n                    ><option value=\"XK\">Kosovo</option\n                    ><option value=\"KW\">Kuwait</option\n                    ><option value=\"KG\">Kyrgyzstan</option\n                    ><option value=\"LA\">Laos</option\n                    ><option value=\"LV\">Latvia</option\n                    ><option value=\"LB\">Lebanon</option\n                    ><option value=\"LS\">Lesotho</option\n                    ><option value=\"LR\">Liberia</option\n                    ><option value=\"LY\">Libya</option\n                    ><option value=\"LI\">Liechtenstein</option\n                    ><option value=\"LT\">Lithuania</option\n                    ><option value=\"LU\">Luxembourg</option\n                    ><option value=\"MO\">Macau SAR China</option\n                    ><option value=\"MK\">Macedonia</option\n                    ><option value=\"MG\">Madagascar</option\n                    ><option value=\"MW\">Malawi</option\n                    ><option value=\"MY\">Malaysia</option\n                    ><option value=\"MV\">Maldives</option\n                    ><option value=\"ML\">Mali</option\n                    ><option value=\"MT\">Malta</option\n                    ><option value=\"MQ\">Martinique</option\n                    ><option value=\"MR\">Mauritania</option\n                    ><option value=\"MU\">Mauritius</option\n                    ><option value=\"YT\">Mayotte</option\n                    ><option value=\"MX\">Mexico</option\n                    ><option value=\"MD\">Moldova</option\n                    ><option value=\"MC\">Monaco</option\n                    ><option value=\"MN\">Mongolia</option\n                    ><option value=\"ME\">Montenegro</option\n                    ><option value=\"MS\">Montserrat</option\n                    ><option value=\"MA\">Morocco</option\n                    ><option value=\"MZ\">Mozambique</option\n                    ><option value=\"MM\">Myanmar (Burma)</option\n                    ><option value=\"NA\">Namibia</option\n                    ><option value=\"NR\">Nauru</option\n                    ><option value=\"NP\">Nepal</option\n                    ><option value=\"NL\">Netherlands</option\n                    ><option value=\"NC\">New Caledonia</option\n                    ><option value=\"NZ\">New Zealand</option\n                    ><option value=\"NI\">Nicaragua</option\n                    ><option value=\"NE\">Niger</option\n                    ><option value=\"NG\">Nigeria</option\n                    ><option value=\"NU\">Niue</option\n                    ><option value=\"NO\">Norway</option\n                    ><option value=\"OM\">Oman</option\n                    ><option value=\"PK\">Pakistan</option\n                    ><option value=\"PS\">Palestinian Territories</option\n                    ><option value=\"PA\">Panama</option\n                    ><option value=\"PG\">Papua New Guinea</option\n                    ><option value=\"PY\">Paraguay</option\n                    ><option value=\"PE\">Peru</option\n                    ><option value=\"PH\">Philippines</option\n                    ><option value=\"PN\">Pitcairn Islands</option\n                    ><option value=\"PL\">Poland</option\n                    ><option value=\"PT\">Portugal</option\n                    ><option value=\"PR\">Puerto Rico</option\n                    ><option value=\"QA\">Qatar</option\n                    ><option value=\"RE\">Réunion</option\n                    ><option value=\"RO\">Romania</option\n                    ><option value=\"RU\">Russia</option\n                    ><option value=\"RW\">Rwanda</option\n                    ><option value=\"WS\">Samoa</option\n                    ><option value=\"SM\">San Marino</option\n                    ><option value=\"ST\">São Tomé &amp; Príncipe</option\n                    ><option value=\"SA\">Saudi Arabia</option\n                    ><option value=\"SN\">Senegal</option\n                    ><option value=\"RS\">Serbia</option\n                    ><option value=\"SC\">Seychelles</option\n                    ><option value=\"SL\">Sierra Leone</option\n                    ><option value=\"SG\">Singapore</option\n                    ><option value=\"SX\">Sint Maarten</option\n                    ><option value=\"SK\">Slovakia</option\n                    ><option value=\"SI\">Slovenia</option\n                    ><option value=\"SB\">Solomon Islands</option\n                    ><option value=\"SO\">Somalia</option\n                    ><option value=\"ZA\">South Africa</option\n                    ><option value=\"GS\">South Georgia &amp; South Sandwich Islands</option\n                    ><option value=\"KR\">South Korea</option\n                    ><option value=\"SS\">South Sudan</option\n                    ><option value=\"ES\">Spain</option\n                    ><option value=\"LK\">Sri Lanka</option\n                    ><option value=\"BL\">St. Barthélemy</option\n                    ><option value=\"SH\">St. Helena</option\n                    ><option value=\"KN\">St. Kitts &amp; Nevis</option\n                    ><option value=\"LC\">St. Lucia</option\n                    ><option value=\"MF\">St. Martin</option\n                    ><option value=\"PM\">St. Pierre &amp; Miquelon</option\n                    ><option value=\"VC\">St. Vincent &amp; Grenadines</option\n                    ><option value=\"SR\">Suriname</option\n                    ><option value=\"SJ\">Svalbard &amp; Jan Mayen</option\n                    ><option value=\"SZ\">Swaziland</option\n                    ><option value=\"SE\">Sweden</option\n                    ><option value=\"CH\">Switzerland</option\n                    ><option value=\"TW\">Taiwan</option\n                    ><option value=\"TJ\">Tajikistan</option\n                    ><option value=\"TZ\">Tanzania</option\n                    ><option value=\"TH\">Thailand</option\n                    ><option value=\"TL\">Timor-Leste</option\n                    ><option value=\"TG\">Togo</option\n                    ><option value=\"TK\">Tokelau</option\n                    ><option value=\"TO\">Tonga</option\n                    ><option value=\"TT\">Trinidad &amp; Tobago</option\n                    ><option value=\"TA\">Tristan da Cunha</option\n                    ><option value=\"TN\">Tunisia</option\n                    ><option value=\"TR\">Turkey</option\n                    ><option value=\"TM\">Turkmenistan</option\n                    ><option value=\"TC\">Turks &amp; Caicos Islands</option\n                    ><option value=\"TV\">Tuvalu</option\n                    ><option value=\"UG\">Uganda</option\n                    ><option value=\"UA\">Ukraine</option\n                    ><option value=\"AE\">United Arab Emirates</option\n                    ><option value=\"GB\">United Kingdom</option\n                    ><option value=\"US\" selected=\"selected\">United States</option\n                    ><option value=\"UY\">Uruguay</option\n                    ><option value=\"UZ\">Uzbekistan</option\n                    ><option value=\"VU\">Vanuatu</option\n                    ><option value=\"VA\">Vatican City</option\n                    ><option value=\"VE\">Venezuela</option\n                    ><option value=\"VN\">Vietnam</option\n                    ><option value=\"WF\">Wallis &amp; Futuna</option\n                    ><option value=\"EH\">Western Sahara</option\n                    ><option value=\"YE\">Yemen</option\n                    ><option value=\"ZM\">Zambia</option\n                    ><option value=\"ZW\">Zimbabwe</option>\n                    </select>\n                  </div>\n                </label>\n              </div>\n              <div class=\"ElementsModal--form\">\n                <input\n                  type=\"hidden\"\n                  name=\"amount\"\n                  value=\"${content.amount}\"\n                />\n                <input\n                  type=\"hidden\"\n                  name=\"currency\"\n                  value=\"${content.currency}\"\n                />\n                <input\n                  type=\"hidden\"\n                  name=\"description\"\n                  value=\"${content.productName}\"\n                />\n                <button class=\"ElementsModal--pay-button\">Pay ${amount}</button>\n              </div>\n              <!-- Edit your terms and conditions here   -->\n              <div class=\"footer ElementsModal--footer-text\">\n                By purchasing this chair, you agree to KAVHOLM’s\n                <a class=\"ElementsModal--footer-text\" href=\"stripe.com\"\n                  >Terms and Conditions.</a\n                >\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n    `; // insert modal in dom\n\n    document.body.insertBefore(modal, document.body.firstChild);\n    getPublicKey().then(key => {\n      _elementsModal_stripe = Stripe(key);\n      createElements(content, paymentIntent);\n      createPaymentRequest(content, paymentIntent);\n    });\n  }\n\n  function getPublicKey() {\n    return fetch(_elementsModal_HOST_URL + '/public-key', {\n      method: 'get',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return data.publicKey;\n    });\n  }\n\n  function toggleElementsModalVisibility() {\n    var modal = document.querySelector('.ElementsModal--modal');\n\n    if (modal && modal.classList) {\n      modal.classList.toggle('ElementsModal--show-modal');\n    }\n  }\n\n  function createPaymentIntent(content) {\n    return fetch(_elementsModal_HOST_URL + '/payment_intents', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(content)\n    }).then(function (response) {\n      return response.json();\n    }).then(function (paymentIntent) {\n      return paymentIntent;\n    });\n  }\n\n  function createPaymentRequest(content, paymentIntent) {\n    var paymentRequest = _elementsModal_stripe.paymentRequest({\n      country: 'US',\n      currency: content.currency,\n      total: {\n        label: content.productName + ', ' + content.businessName,\n        amount: paymentIntent.amount\n      },\n      requestPayerName: true,\n      requestPayerEmail: true\n    });\n\n    var elements = _elementsModal_stripe.elements();\n\n    var prButton = elements.create('paymentRequestButton', {\n      paymentRequest: paymentRequest\n    }); // Check the availability of the Payment Request API first.\n\n    paymentRequest.canMakePayment().then(function (result) {\n      if (result) {\n        document.getElementById('payment-request-section').style.display = 'block';\n        prButton.mount('#payment-request-button');\n      } else {\n        document.getElementById('payment-request-button').style.display = 'none';\n        document.getElementById('payment-request-section').style.display = 'none';\n      }\n    });\n    paymentRequest.on('paymentmethod', function (ev) {\n      _elementsModal_stripe.confirmCardPayment(paymentIntent.client_secret, {\n        payment_method: ev.paymentMethod.id\n      }, {\n        handleActions: false\n      }).then(function (confirmResult) {\n        if (confirmResult.error) {\n          // Report to the browser that the payment failed, prompting it to\n          // re-show the payment interface, or show an error message and close\n          // the payment interface.\n          ev.complete('fail');\n        } else {\n          // Report to the browser that the confirmation was successful, prompting\n          // it to close the browser payment method collection interface.\n          ev.complete('success'); // Check if payment has fully succeeded and no futher action is needed\n\n          if (confirmResult.paymentIntent.status === 'succeeded') return stripePaymentHandler(); // Otherwise, let Stripe.js handle the rest of the payment flow (eg. 3DS authentication is required).\n\n          _elementsModal_stripe.confirmCardPayment(paymentIntent.client_secret).then(function (result) {\n            if (result.error) {\n              // The payment failed -- ask your customer for a new payment method.\n              var displayError = document.getElementById('paymentRequest-errors');\n              displayError.textContent = result.error.message;\n            } else {\n              // The payment has succeeded.\n              stripePaymentHandler();\n            }\n          });\n        }\n      });\n    });\n  }\n\n  function create(content) {\n    createPaymentIntent(content).then(function (paymentIntent) {\n      init(content, paymentIntent);\n    });\n  }\n\n  function createElements(content, paymentIntent) {\n    // Create an instance of Elements.\n    var elements = _elementsModal_stripe.elements(); // Custom styling can be passed to options when creating an Element.\n    // (Note that this  uses a wider set of styles than the guide below.)\n\n\n    var style = {\n      base: {\n        color: '#32325d',\n        fontFamily: '-apple-system, BlinkMacSystemFont, sans-serif',\n        fontSmoothing: 'antialiased',\n        fontSize: '16px',\n        '::placeholder': {\n          color: '#aab7c4'\n        }\n      },\n      invalid: {\n        color: '#fa755a',\n        iconColor: '#fa755a'\n      }\n    }; // Create an instance of the card Element.\n\n    var card = elements.create('card', {\n      style: style\n    }); // Add an instance of the card Element into the `card-element` <div>.\n\n    card.mount('#card-element'); // Handle form submission.\n\n    var form = document.getElementById('payment-form');\n    form.addEventListener('submit', function (event) {\n      event.preventDefault();\n\n      _elementsModal_stripe.confirmCardPayment(paymentIntent.client_secret, {\n        payment_method: {\n          card: card,\n          billing_details: {\n            name: content.customerName\n          }\n        }\n      }).then(function (result) {\n        if (result.error) {\n          var displayError = document.getElementById('card-errors');\n          displayError.textContent = result.error.message;\n        } else {\n          stripePaymentHandler();\n        }\n      });\n    });\n  } // Implement logic to handle the users authorization for payment.\n  // Here you will want to redirect to a successful payments page, or update the page.\n\n\n  function stripePaymentHandler() {\n    toggleElementsModalVisibility();\n    document.querySelectorAll('.payment-view').forEach(function (view) {\n      view.classList.add('hidden');\n    });\n    document.querySelectorAll('.completed-view').forEach(function (view) {\n      view.classList.remove('hidden');\n    });\n  } // Allows the user to dismiss the Elements modal when using the esc key\n\n\n  document.addEventListener('keyup', function (event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    var key = event.key || event.keyCode;\n\n    if (key === 'Escape' || key === 'Esc' || key === 27) {\n      var modal = document.querySelector('.ElementsModal--modal');\n\n      if (modal.classList[1] === 'ElementsModal--show-modal') {\n        toggleElementsModalVisibility();\n      }\n    }\n  }); // UI enhancement to dismiss the Elements modal when the user clicks\n  // outside of the modal and in the window.\n\n  function dismissElementsModalOnWindowClick(event) {\n    var modal = document.querySelector('.ElementsModal--modal');\n\n    if (event.target === modal && modal.classList[1] === 'ElementsModal--show-modal') {\n      toggleElementsModalVisibility();\n    }\n  }\n\n  window.addEventListener('click', dismissElementsModalOnWindowClick);\n\n  window.elementsModal = (() => {\n    return {\n      create,\n      toggleElementsModalVisibility\n    };\n  })();\n\n  function browserLocale() {\n    var lang;\n\n    if (navigator.languages && navigator.languages.length) {\n      // latest versions of Chrome and Firefox set this correctly\n      lang = navigator.languages[0];\n    } else if (navigator.userLanguage) {\n      // IE only\n      lang = navigator.userLanguage;\n    } else {\n      // latest versions of Chrome, Firefox, and Safari set this correctly\n      lang = navigator.language;\n    }\n\n    return lang;\n  }\n\n  function zeroDecimalCurrencies(currency) {\n    var zeroDecimalCurrencies = ['BIF', 'CLP', 'DJF', 'GNF', 'JPY', 'KMF', 'KRW', 'XPF', 'XOF', 'XAF', 'VUV', 'VND', 'UGX', 'RWF', 'PYG', 'MGA'];\n    return zeroDecimalCurrencies.indexOf(currency);\n  }\n\n  function calculateDisplayAmountFromCurrency(paymentIntent) {\n    var amountToDisplay = paymentIntent.amount;\n\n    if (zeroDecimalCurrencies(paymentIntent.currency) === -1) {\n      amountToDisplay = amountToDisplay / 100;\n    }\n\n    return amountToDisplay.toLocaleString(browserLocale(), {\n      style: 'currency',\n      currency: paymentIntent.currency\n    });\n  }\n})();","map":{"version":3,"sources":["C:/Users/Evalds/Documents/Portfolio_1/client/src/components/basket/components/payment/stripeModal.js"],"names":["_elementsModal_stripe","_elementsModal_HOST_URL","init","content","paymentIntent","amount","calculateDisplayAmountFromCurrency","modal","document","createElement","className","innerHTML","businessName","productName","customerEmail","currency","body","insertBefore","firstChild","getPublicKey","then","key","Stripe","createElements","createPaymentRequest","fetch","method","headers","response","json","data","publicKey","toggleElementsModalVisibility","querySelector","classList","toggle","createPaymentIntent","JSON","stringify","paymentRequest","country","total","label","requestPayerName","requestPayerEmail","elements","prButton","create","canMakePayment","result","getElementById","style","display","mount","on","ev","confirmCardPayment","client_secret","payment_method","paymentMethod","id","handleActions","confirmResult","error","complete","status","stripePaymentHandler","displayError","textContent","message","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","card","form","addEventListener","event","preventDefault","billing_details","name","customerName","querySelectorAll","forEach","view","add","remove","defaultPrevented","keyCode","dismissElementsModalOnWindowClick","target","window","elementsModal","browserLocale","lang","navigator","languages","length","userLanguage","language","zeroDecimalCurrencies","indexOf","amountToDisplay","toLocaleString"],"mappings":"AAAA,CAAC,YAAY;AACX,MAAIA,qBAAJ;;AACA,MAAIC,uBAAuB,GAAG,EAA9B;;AAEA,WAASC,IAAT,CAAcC,OAAd,EAAuBC,aAAvB,EAAsC;AACpC,QAAIC,MAAM,GAAGC,kCAAkC,CAACF,aAAD,CAA/C;AACA,QAAIG,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACAF,IAAAA,KAAK,CAACG,SAAN,GAAkB,sBAAlB;AACAH,IAAAA,KAAK,CAACI,SAAN,GAAmB;AACvB;AACA;AACA;AACA;AACA,kDACcR,OAAO,CAACS,YAAR,IAAwB,EACzB;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEACYT,OAAO,CAACU,WAAR,IAAuB,EACxB;AACX,qEAAqER,MAAO;AAC5E,qEACYF,OAAO,CAACW,aAAR,IAAyB,EAC1B;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2BX,OAAO,CAACE,MAAO;AAC1C;AACA;AACA;AACA;AACA,2BAA2BF,OAAO,CAACY,QAAS;AAC5C;AACA;AACA;AACA;AACA,2BAA2BZ,OAAO,CAACU,WAAY;AAC/C;AACA,gEAAgER,MAAO;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/XI,CAJoC,CAoYpC;;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","sourcesContent":["(function () {\r\n  var _elementsModal_stripe;\r\n  var _elementsModal_HOST_URL = '';\r\n\r\n  function init(content, paymentIntent) {\r\n    var amount = calculateDisplayAmountFromCurrency(paymentIntent);\r\n    var modal = document.createElement('div');\r\n    modal.className = 'ElementsModal--modal';\r\n    modal.innerHTML = `\r\n      <div class=\"ElementsModal--modal-content\">\r\n      <div class=\"ElementsModal--top-banner\">\r\n        <div class=\"ElementsModal--sales-info\">\r\n          <div class=\"ElementsModal--top\">\r\n            <div class=\"ElementsModal--company\">${\r\n              content.businessName || ''\r\n            }</div>\r\n            <button class=\"ElementsModal--close\" onClick=\"window.elementsModal.toggleElementsModalVisibility()\">\r\n              <svg\r\n                width=\"20px\"\r\n                height=\"20px\"\r\n                viewBox=\"0 0 20 20\"\r\n                version=\"1.1\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n              >\r\n                <defs>\r\n                  <path\r\n                    d=\"M10,8.8766862 L13.6440403,5.2326459 C13.9542348,4.92245137 14.4571596,4.92245137 14.7673541,5.2326459 C15.0775486,5.54284044 15.0775486,6.04576516 14.7673541,6.3559597 L11.1238333,9.99948051 L14.7673541,13.6430016 C15.0775486,13.9531961 15.0775486,14.4561209 14.7673541,14.7663154 C14.4571596,15.0765099 13.9542348,15.0765099 13.6440403,14.7663154 L10,11.1222751 L6.3559597,14.7663154 C6.04576516,15.0765099 5.54284044,15.0765099 5.2326459,14.7663154 C4.92245137,14.4561209 4.92245137,13.9531961 5.2326459,13.6430016 L8.87616671,9.99948051 L5.2326459,6.3559597 C4.92245137,6.04576516 4.92245137,5.54284044 5.2326459,5.2326459 C5.54284044,4.92245137 6.04576516,4.92245137 6.3559597,5.2326459 L10,8.8766862 Z\"\r\n                    id=\"path-1\"\r\n                  ></path>\r\n                </defs>\r\n                <g\r\n                  id=\"Payment-recipes\"\r\n                  stroke=\"none\"\r\n                  stroke-width=\"1\"\r\n                  fill=\"none\"\r\n                  fill-rule=\"evenodd\"\r\n                >\r\n                  <g\r\n                    id=\"Elements-Popup\"\r\n                    transform=\"translate(-816.000000, -97.000000)\"\r\n                  >\r\n                    <g id=\"close-btn\" transform=\"translate(816.000000, 97.000000)\">\r\n                      <circle\r\n                        id=\"Oval\"\r\n                        fill-opacity=\"0.3\"\r\n                        fill=\"#AEAEAE\"\r\n                        cx=\"10\"\r\n                        cy=\"10\"\r\n                        r=\"10\"\r\n                      ></circle>\r\n                      <mask id=\"mask-2\" fill=\"white\">\r\n                        <use xlink:href=\"#path-1\"></use>\r\n                      </mask>\r\n                      <use\r\n                        id=\"Mask\"\r\n                        fill-opacity=\"0.5\"\r\n                        fill=\"#FFFFFF\"\r\n                        opacity=\"0.5\"\r\n                        xlink:href=\"#path-1\"\r\n                      ></use>\r\n                    </g>\r\n                  </g>\r\n                </g>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div class=\"ElementsModal--product ElementsModal--details\">${\r\n            content.productName || ''\r\n          }</div>\r\n          <div class=\"ElementsModal--price ElementsModal--details\">${amount}</div>\r\n          <div class=\"ElementsModal--email ElementsModal--details\">${\r\n            content.customerEmail || ''\r\n          }</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"ElementsModal--payment-details\">\r\n        <form\r\n          class=\"ElementsModal--payment-form\"\r\n          id=\"payment-form\"\r\n        >\r\n          <div class=\"form-row\">\r\n            <div class=\"ElementsModal--forms\">\r\n              <div id=\"payment-request-section\" class=\"StripeElement--payment-request\">\r\n                <div id=\"payment-request-button\" class=\"StripeElement--payment-request-button\">\r\n                <!-- A Stripe Element will be inserted here. -->\r\n                </div>\r\n                <!-- Used to display form errors. -->\r\n                <div\r\n                  id=\"paymentRequest-errors\"\r\n                  class=\"ElementsModal--error-message\"\r\n                  role=\"alert\"\r\n                ></div>\r\n                <div class=\"ElementsModal--form-divider\">\r\n                    <span class=\"ElementsModal--form-divider-text\">Or pay with card</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"ElementsModal--form\">\r\n                <label for=\"ElementsModal--card-element\">\r\n                  <span class=\"ElementsModal--form-label spacer\"\r\n                    >Card details</span\r\n                  >\r\n                  <div class=\"StripeElement--card\" id=\"card-element\">\r\n                    <!-- A Stripe Element will be inserted here. -->\r\n                  </div>\r\n                </label>\r\n                <!-- Used to display form errors. -->\r\n                <div\r\n                  id=\"card-errors\"\r\n                  class=\"ElementsModal--error-message\"\r\n                  role=\"alert\"\r\n                ></div>\r\n              </div>\r\n              <div class=\"ElementsModal--form\">\r\n                <label class=\"select\">\r\n                  <span class=\"ElementsModal--form-label spacer\"\r\n                    >Country or region</span\r\n                  >\r\n                  <div id=\"country\" class=\"ElementsModal--form-select\">\r\n                    <select name=\"country\" autocomplete=\"billing country\" aria-label=\"Country or region\">\r\n                    <option value=\"AF\">Afghanistan</option\r\n                    ><option value=\"AX\">Åland Islands</option\r\n                    ><option value=\"AL\">Albania</option\r\n                    ><option value=\"DZ\">Algeria</option\r\n                    ><option value=\"AD\">Andorra</option\r\n                    ><option value=\"AO\">Angola</option\r\n                    ><option value=\"AI\">Anguilla</option\r\n                    ><option value=\"AQ\">Antarctica</option\r\n                    ><option value=\"AG\">Antigua &amp; Barbuda</option\r\n                    ><option value=\"AR\">Argentina</option\r\n                    ><option value=\"AM\">Armenia</option\r\n                    ><option value=\"AW\">Aruba</option\r\n                    ><option value=\"AC\">Ascension Island</option\r\n                    ><option value=\"AU\">Australia</option\r\n                    ><option value=\"AT\">Austria</option\r\n                    ><option value=\"AZ\">Azerbaijan</option\r\n                    ><option value=\"BS\">Bahamas</option\r\n                    ><option value=\"BH\">Bahrain</option\r\n                    ><option value=\"BD\">Bangladesh</option\r\n                    ><option value=\"BB\">Barbados</option\r\n                    ><option value=\"BY\">Belarus</option\r\n                    ><option value=\"BE\">Belgium</option\r\n                    ><option value=\"BZ\">Belize</option\r\n                    ><option value=\"BJ\">Benin</option\r\n                    ><option value=\"BM\">Bermuda</option\r\n                    ><option value=\"BT\">Bhutan</option\r\n                    ><option value=\"BO\">Bolivia</option\r\n                    ><option value=\"BA\">Bosnia &amp; Herzegovina</option\r\n                    ><option value=\"BW\">Botswana</option\r\n                    ><option value=\"BV\">Bouvet Island</option\r\n                    ><option value=\"BR\">Brazil</option\r\n                    ><option value=\"IO\">British Indian Ocean Territory</option\r\n                    ><option value=\"VG\">British Virgin Islands</option\r\n                    ><option value=\"BN\">Brunei</option\r\n                    ><option value=\"BG\">Bulgaria</option\r\n                    ><option value=\"BF\">Burkina Faso</option\r\n                    ><option value=\"BI\">Burundi</option\r\n                    ><option value=\"KH\">Cambodia</option\r\n                    ><option value=\"CM\">Cameroon</option\r\n                    ><option value=\"CA\">Canada</option\r\n                    ><option value=\"CV\">Cape Verde</option\r\n                    ><option value=\"BQ\">Caribbean Netherlands</option\r\n                    ><option value=\"KY\">Cayman Islands</option\r\n                    ><option value=\"CF\">Central African Republic</option\r\n                    ><option value=\"TD\">Chad</option\r\n                    ><option value=\"CL\">Chile</option\r\n                    ><option value=\"CN\">China</option\r\n                    ><option value=\"CO\">Colombia</option\r\n                    ><option value=\"KM\">Comoros</option\r\n                    ><option value=\"CG\">Congo - Brazzaville</option\r\n                    ><option value=\"CD\">Congo - Kinshasa</option\r\n                    ><option value=\"CK\">Cook Islands</option\r\n                    ><option value=\"CR\">Costa Rica</option\r\n                    ><option value=\"CI\">Côte d’Ivoire</option\r\n                    ><option value=\"HR\">Croatia</option\r\n                    ><option value=\"CW\">Curaçao</option\r\n                    ><option value=\"CY\">Cyprus</option\r\n                    ><option value=\"CZ\">Czechia</option\r\n                    ><option value=\"DK\">Denmark</option\r\n                    ><option value=\"DJ\">Djibouti</option\r\n                    ><option value=\"DM\">Dominica</option\r\n                    ><option value=\"DO\">Dominican Republic</option\r\n                    ><option value=\"EC\">Ecuador</option\r\n                    ><option value=\"EG\">Egypt</option\r\n                    ><option value=\"SV\">El Salvador</option\r\n                    ><option value=\"GQ\">Equatorial Guinea</option\r\n                    ><option value=\"ER\">Eritrea</option\r\n                    ><option value=\"EE\">Estonia</option\r\n                    ><option value=\"ET\">Ethiopia</option\r\n                    ><option value=\"FK\">Falkland Islands</option\r\n                    ><option value=\"FO\">Faroe Islands</option\r\n                    ><option value=\"FJ\">Fiji</option\r\n                    ><option value=\"FI\">Finland</option\r\n                    ><option value=\"FR\">France</option\r\n                    ><option value=\"GF\">French Guiana</option\r\n                    ><option value=\"PF\">French Polynesia</option\r\n                    ><option value=\"TF\">French Southern Territories</option\r\n                    ><option value=\"GA\">Gabon</option\r\n                    ><option value=\"GM\">Gambia</option\r\n                    ><option value=\"GE\">Georgia</option\r\n                    ><option value=\"DE\">Germany</option\r\n                    ><option value=\"GH\">Ghana</option\r\n                    ><option value=\"GI\">Gibraltar</option\r\n                    ><option value=\"GR\">Greece</option\r\n                    ><option value=\"GL\">Greenland</option\r\n                    ><option value=\"GD\">Grenada</option\r\n                    ><option value=\"GP\">Guadeloupe</option\r\n                    ><option value=\"GU\">Guam</option\r\n                    ><option value=\"GT\">Guatemala</option\r\n                    ><option value=\"GG\">Guernsey</option\r\n                    ><option value=\"GN\">Guinea</option\r\n                    ><option value=\"GW\">Guinea-Bissau</option\r\n                    ><option value=\"GY\">Guyana</option\r\n                    ><option value=\"HT\">Haiti</option\r\n                    ><option value=\"HN\">Honduras</option\r\n                    ><option value=\"HK\">Hong Kong SAR China</option\r\n                    ><option value=\"HU\">Hungary</option\r\n                    ><option value=\"IS\">Iceland</option\r\n                    ><option value=\"IN\">India</option\r\n                    ><option value=\"ID\">Indonesia</option\r\n                    ><option value=\"IR\">Iran</option\r\n                    ><option value=\"IQ\">Iraq</option\r\n                    ><option value=\"IE\">Ireland</option\r\n                    ><option value=\"IM\">Isle of Man</option\r\n                    ><option value=\"IL\">Israel</option\r\n                    ><option value=\"IT\">Italy</option\r\n                    ><option value=\"JM\">Jamaica</option\r\n                    ><option value=\"JP\">Japan</option\r\n                    ><option value=\"JE\">Jersey</option\r\n                    ><option value=\"JO\">Jordan</option\r\n                    ><option value=\"KZ\">Kazakhstan</option\r\n                    ><option value=\"KE\">Kenya</option\r\n                    ><option value=\"KI\">Kiribati</option\r\n                    ><option value=\"XK\">Kosovo</option\r\n                    ><option value=\"KW\">Kuwait</option\r\n                    ><option value=\"KG\">Kyrgyzstan</option\r\n                    ><option value=\"LA\">Laos</option\r\n                    ><option value=\"LV\">Latvia</option\r\n                    ><option value=\"LB\">Lebanon</option\r\n                    ><option value=\"LS\">Lesotho</option\r\n                    ><option value=\"LR\">Liberia</option\r\n                    ><option value=\"LY\">Libya</option\r\n                    ><option value=\"LI\">Liechtenstein</option\r\n                    ><option value=\"LT\">Lithuania</option\r\n                    ><option value=\"LU\">Luxembourg</option\r\n                    ><option value=\"MO\">Macau SAR China</option\r\n                    ><option value=\"MK\">Macedonia</option\r\n                    ><option value=\"MG\">Madagascar</option\r\n                    ><option value=\"MW\">Malawi</option\r\n                    ><option value=\"MY\">Malaysia</option\r\n                    ><option value=\"MV\">Maldives</option\r\n                    ><option value=\"ML\">Mali</option\r\n                    ><option value=\"MT\">Malta</option\r\n                    ><option value=\"MQ\">Martinique</option\r\n                    ><option value=\"MR\">Mauritania</option\r\n                    ><option value=\"MU\">Mauritius</option\r\n                    ><option value=\"YT\">Mayotte</option\r\n                    ><option value=\"MX\">Mexico</option\r\n                    ><option value=\"MD\">Moldova</option\r\n                    ><option value=\"MC\">Monaco</option\r\n                    ><option value=\"MN\">Mongolia</option\r\n                    ><option value=\"ME\">Montenegro</option\r\n                    ><option value=\"MS\">Montserrat</option\r\n                    ><option value=\"MA\">Morocco</option\r\n                    ><option value=\"MZ\">Mozambique</option\r\n                    ><option value=\"MM\">Myanmar (Burma)</option\r\n                    ><option value=\"NA\">Namibia</option\r\n                    ><option value=\"NR\">Nauru</option\r\n                    ><option value=\"NP\">Nepal</option\r\n                    ><option value=\"NL\">Netherlands</option\r\n                    ><option value=\"NC\">New Caledonia</option\r\n                    ><option value=\"NZ\">New Zealand</option\r\n                    ><option value=\"NI\">Nicaragua</option\r\n                    ><option value=\"NE\">Niger</option\r\n                    ><option value=\"NG\">Nigeria</option\r\n                    ><option value=\"NU\">Niue</option\r\n                    ><option value=\"NO\">Norway</option\r\n                    ><option value=\"OM\">Oman</option\r\n                    ><option value=\"PK\">Pakistan</option\r\n                    ><option value=\"PS\">Palestinian Territories</option\r\n                    ><option value=\"PA\">Panama</option\r\n                    ><option value=\"PG\">Papua New Guinea</option\r\n                    ><option value=\"PY\">Paraguay</option\r\n                    ><option value=\"PE\">Peru</option\r\n                    ><option value=\"PH\">Philippines</option\r\n                    ><option value=\"PN\">Pitcairn Islands</option\r\n                    ><option value=\"PL\">Poland</option\r\n                    ><option value=\"PT\">Portugal</option\r\n                    ><option value=\"PR\">Puerto Rico</option\r\n                    ><option value=\"QA\">Qatar</option\r\n                    ><option value=\"RE\">Réunion</option\r\n                    ><option value=\"RO\">Romania</option\r\n                    ><option value=\"RU\">Russia</option\r\n                    ><option value=\"RW\">Rwanda</option\r\n                    ><option value=\"WS\">Samoa</option\r\n                    ><option value=\"SM\">San Marino</option\r\n                    ><option value=\"ST\">São Tomé &amp; Príncipe</option\r\n                    ><option value=\"SA\">Saudi Arabia</option\r\n                    ><option value=\"SN\">Senegal</option\r\n                    ><option value=\"RS\">Serbia</option\r\n                    ><option value=\"SC\">Seychelles</option\r\n                    ><option value=\"SL\">Sierra Leone</option\r\n                    ><option value=\"SG\">Singapore</option\r\n                    ><option value=\"SX\">Sint Maarten</option\r\n                    ><option value=\"SK\">Slovakia</option\r\n                    ><option value=\"SI\">Slovenia</option\r\n                    ><option value=\"SB\">Solomon Islands</option\r\n                    ><option value=\"SO\">Somalia</option\r\n                    ><option value=\"ZA\">South Africa</option\r\n                    ><option value=\"GS\">South Georgia &amp; South Sandwich Islands</option\r\n                    ><option value=\"KR\">South Korea</option\r\n                    ><option value=\"SS\">South Sudan</option\r\n                    ><option value=\"ES\">Spain</option\r\n                    ><option value=\"LK\">Sri Lanka</option\r\n                    ><option value=\"BL\">St. Barthélemy</option\r\n                    ><option value=\"SH\">St. Helena</option\r\n                    ><option value=\"KN\">St. Kitts &amp; Nevis</option\r\n                    ><option value=\"LC\">St. Lucia</option\r\n                    ><option value=\"MF\">St. Martin</option\r\n                    ><option value=\"PM\">St. Pierre &amp; Miquelon</option\r\n                    ><option value=\"VC\">St. Vincent &amp; Grenadines</option\r\n                    ><option value=\"SR\">Suriname</option\r\n                    ><option value=\"SJ\">Svalbard &amp; Jan Mayen</option\r\n                    ><option value=\"SZ\">Swaziland</option\r\n                    ><option value=\"SE\">Sweden</option\r\n                    ><option value=\"CH\">Switzerland</option\r\n                    ><option value=\"TW\">Taiwan</option\r\n                    ><option value=\"TJ\">Tajikistan</option\r\n                    ><option value=\"TZ\">Tanzania</option\r\n                    ><option value=\"TH\">Thailand</option\r\n                    ><option value=\"TL\">Timor-Leste</option\r\n                    ><option value=\"TG\">Togo</option\r\n                    ><option value=\"TK\">Tokelau</option\r\n                    ><option value=\"TO\">Tonga</option\r\n                    ><option value=\"TT\">Trinidad &amp; Tobago</option\r\n                    ><option value=\"TA\">Tristan da Cunha</option\r\n                    ><option value=\"TN\">Tunisia</option\r\n                    ><option value=\"TR\">Turkey</option\r\n                    ><option value=\"TM\">Turkmenistan</option\r\n                    ><option value=\"TC\">Turks &amp; Caicos Islands</option\r\n                    ><option value=\"TV\">Tuvalu</option\r\n                    ><option value=\"UG\">Uganda</option\r\n                    ><option value=\"UA\">Ukraine</option\r\n                    ><option value=\"AE\">United Arab Emirates</option\r\n                    ><option value=\"GB\">United Kingdom</option\r\n                    ><option value=\"US\" selected=\"selected\">United States</option\r\n                    ><option value=\"UY\">Uruguay</option\r\n                    ><option value=\"UZ\">Uzbekistan</option\r\n                    ><option value=\"VU\">Vanuatu</option\r\n                    ><option value=\"VA\">Vatican City</option\r\n                    ><option value=\"VE\">Venezuela</option\r\n                    ><option value=\"VN\">Vietnam</option\r\n                    ><option value=\"WF\">Wallis &amp; Futuna</option\r\n                    ><option value=\"EH\">Western Sahara</option\r\n                    ><option value=\"YE\">Yemen</option\r\n                    ><option value=\"ZM\">Zambia</option\r\n                    ><option value=\"ZW\">Zimbabwe</option>\r\n                    </select>\r\n                  </div>\r\n                </label>\r\n              </div>\r\n              <div class=\"ElementsModal--form\">\r\n                <input\r\n                  type=\"hidden\"\r\n                  name=\"amount\"\r\n                  value=\"${content.amount}\"\r\n                />\r\n                <input\r\n                  type=\"hidden\"\r\n                  name=\"currency\"\r\n                  value=\"${content.currency}\"\r\n                />\r\n                <input\r\n                  type=\"hidden\"\r\n                  name=\"description\"\r\n                  value=\"${content.productName}\"\r\n                />\r\n                <button class=\"ElementsModal--pay-button\">Pay ${amount}</button>\r\n              </div>\r\n              <!-- Edit your terms and conditions here   -->\r\n              <div class=\"footer ElementsModal--footer-text\">\r\n                By purchasing this chair, you agree to KAVHOLM’s\r\n                <a class=\"ElementsModal--footer-text\" href=\"stripe.com\"\r\n                  >Terms and Conditions.</a\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    `;\r\n    // insert modal in dom\r\n    document.body.insertBefore(modal, document.body.firstChild);\r\n\r\n    getPublicKey().then((key) => {\r\n      _elementsModal_stripe = Stripe(key);\r\n      createElements(content, paymentIntent);\r\n      createPaymentRequest(content, paymentIntent);\r\n    });\r\n  }\r\n\r\n  function getPublicKey() {\r\n    return fetch(_elementsModal_HOST_URL + '/public-key', {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n      .then(function (response) {\r\n        return response.json();\r\n      })\r\n      .then(function (data) {\r\n        return data.publicKey;\r\n      });\r\n  }\r\n\r\n  function toggleElementsModalVisibility() {\r\n    var modal = document.querySelector('.ElementsModal--modal');\r\n    if (modal && modal.classList) {\r\n      modal.classList.toggle('ElementsModal--show-modal');\r\n    }\r\n  }\r\n\r\n  function createPaymentIntent(content) {\r\n    return fetch(_elementsModal_HOST_URL + '/payment_intents', {\r\n      method: 'post',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(content),\r\n    })\r\n      .then(function (response) {\r\n        return response.json();\r\n      })\r\n      .then(function (paymentIntent) {\r\n        return paymentIntent;\r\n      });\r\n  }\r\n\r\n  function createPaymentRequest(content, paymentIntent) {\r\n    var paymentRequest = _elementsModal_stripe.paymentRequest({\r\n      country: 'US',\r\n      currency: content.currency,\r\n      total: {\r\n        label: content.productName + ', ' + content.businessName,\r\n        amount: paymentIntent.amount,\r\n      },\r\n      requestPayerName: true,\r\n      requestPayerEmail: true,\r\n    });\r\n\r\n    var elements = _elementsModal_stripe.elements();\r\n    var prButton = elements.create('paymentRequestButton', {\r\n      paymentRequest: paymentRequest,\r\n    });\r\n\r\n    // Check the availability of the Payment Request API first.\r\n    paymentRequest.canMakePayment().then(function (result) {\r\n      if (result) {\r\n        document.getElementById('payment-request-section').style.display =\r\n          'block';\r\n        prButton.mount('#payment-request-button');\r\n      } else {\r\n        document.getElementById('payment-request-button').style.display =\r\n          'none';\r\n        document.getElementById('payment-request-section').style.display =\r\n          'none';\r\n      }\r\n    });\r\n\r\n    paymentRequest.on('paymentmethod', function (ev) {\r\n      _elementsModal_stripe\r\n        .confirmCardPayment(\r\n          paymentIntent.client_secret,\r\n          { payment_method: ev.paymentMethod.id },\r\n          { handleActions: false }\r\n        )\r\n        .then(function (confirmResult) {\r\n          if (confirmResult.error) {\r\n            // Report to the browser that the payment failed, prompting it to\r\n            // re-show the payment interface, or show an error message and close\r\n            // the payment interface.\r\n            ev.complete('fail');\r\n          } else {\r\n            // Report to the browser that the confirmation was successful, prompting\r\n            // it to close the browser payment method collection interface.\r\n            ev.complete('success');\r\n            // Check if payment has fully succeeded and no futher action is needed\r\n            if (confirmResult.paymentIntent.status === 'succeeded')\r\n              return stripePaymentHandler();\r\n            // Otherwise, let Stripe.js handle the rest of the payment flow (eg. 3DS authentication is required).\r\n            _elementsModal_stripe\r\n              .confirmCardPayment(paymentIntent.client_secret)\r\n              .then(function (result) {\r\n                if (result.error) {\r\n                  // The payment failed -- ask your customer for a new payment method.\r\n                  var displayError = document.getElementById(\r\n                    'paymentRequest-errors'\r\n                  );\r\n                  displayError.textContent = result.error.message;\r\n                } else {\r\n                  // The payment has succeeded.\r\n                  stripePaymentHandler();\r\n                }\r\n              });\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  function create(content) {\r\n    createPaymentIntent(content).then(function (paymentIntent) {\r\n      init(content, paymentIntent);\r\n    });\r\n  }\r\n\r\n  function createElements(content, paymentIntent) {\r\n    // Create an instance of Elements.\r\n    var elements = _elementsModal_stripe.elements();\r\n\r\n    // Custom styling can be passed to options when creating an Element.\r\n    // (Note that this  uses a wider set of styles than the guide below.)\r\n    var style = {\r\n      base: {\r\n        color: '#32325d',\r\n        fontFamily: '-apple-system, BlinkMacSystemFont, sans-serif',\r\n        fontSmoothing: 'antialiased',\r\n        fontSize: '16px',\r\n        '::placeholder': {\r\n          color: '#aab7c4',\r\n        },\r\n      },\r\n      invalid: {\r\n        color: '#fa755a',\r\n        iconColor: '#fa755a',\r\n      },\r\n    };\r\n\r\n    // Create an instance of the card Element.\r\n    var card = elements.create('card', {\r\n      style: style,\r\n    });\r\n    // Add an instance of the card Element into the `card-element` <div>.\r\n    card.mount('#card-element');\r\n\r\n    // Handle form submission.\r\n    var form = document.getElementById('payment-form');\r\n    form.addEventListener('submit', function (event) {\r\n      event.preventDefault();\r\n\r\n      _elementsModal_stripe\r\n        .confirmCardPayment(paymentIntent.client_secret, {\r\n          payment_method: {\r\n            card: card,\r\n            billing_details: { name: content.customerName },\r\n          },\r\n        })\r\n        .then(function (result) {\r\n          if (result.error) {\r\n            var displayError = document.getElementById('card-errors');\r\n            displayError.textContent = result.error.message;\r\n          } else {\r\n            stripePaymentHandler();\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  // Implement logic to handle the users authorization for payment.\r\n  // Here you will want to redirect to a successful payments page, or update the page.\r\n  function stripePaymentHandler() {\r\n    toggleElementsModalVisibility();\r\n    document.querySelectorAll('.payment-view').forEach(function (view) {\r\n      view.classList.add('hidden');\r\n    });\r\n    document.querySelectorAll('.completed-view').forEach(function (view) {\r\n      view.classList.remove('hidden');\r\n    });\r\n  }\r\n\r\n  // Allows the user to dismiss the Elements modal when using the esc key\r\n  document.addEventListener('keyup', function (event) {\r\n    if (event.defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    var key = event.key || event.keyCode;\r\n\r\n    if (key === 'Escape' || key === 'Esc' || key === 27) {\r\n      var modal = document.querySelector('.ElementsModal--modal');\r\n      if (modal.classList[1] === 'ElementsModal--show-modal') {\r\n        toggleElementsModalVisibility();\r\n      }\r\n    }\r\n  });\r\n\r\n  // UI enhancement to dismiss the Elements modal when the user clicks\r\n  // outside of the modal and in the window.\r\n  function dismissElementsModalOnWindowClick(event) {\r\n    var modal = document.querySelector('.ElementsModal--modal');\r\n    if (\r\n      event.target === modal &&\r\n      modal.classList[1] === 'ElementsModal--show-modal'\r\n    ) {\r\n      toggleElementsModalVisibility();\r\n    }\r\n  }\r\n  window.addEventListener('click', dismissElementsModalOnWindowClick);\r\n\r\n  window.elementsModal = (() => {\r\n    return { create, toggleElementsModalVisibility };\r\n  })();\r\n\r\n  function browserLocale() {\r\n    var lang;\r\n\r\n    if (navigator.languages && navigator.languages.length) {\r\n      // latest versions of Chrome and Firefox set this correctly\r\n      lang = navigator.languages[0];\r\n    } else if (navigator.userLanguage) {\r\n      // IE only\r\n      lang = navigator.userLanguage;\r\n    } else {\r\n      // latest versions of Chrome, Firefox, and Safari set this correctly\r\n      lang = navigator.language;\r\n    }\r\n\r\n    return lang;\r\n  }\r\n\r\n  function zeroDecimalCurrencies(currency) {\r\n    var zeroDecimalCurrencies = [\r\n      'BIF',\r\n      'CLP',\r\n      'DJF',\r\n      'GNF',\r\n      'JPY',\r\n      'KMF',\r\n      'KRW',\r\n      'XPF',\r\n      'XOF',\r\n      'XAF',\r\n      'VUV',\r\n      'VND',\r\n      'UGX',\r\n      'RWF',\r\n      'PYG',\r\n      'MGA',\r\n    ];\r\n    return zeroDecimalCurrencies.indexOf(currency);\r\n  }\r\n\r\n  function calculateDisplayAmountFromCurrency(paymentIntent) {\r\n    var amountToDisplay = paymentIntent.amount;\r\n\r\n    if (zeroDecimalCurrencies(paymentIntent.currency) === -1) {\r\n      amountToDisplay = amountToDisplay / 100;\r\n    }\r\n    return amountToDisplay.toLocaleString(browserLocale(), {\r\n      style: 'currency',\r\n      currency: paymentIntent.currency,\r\n    });\r\n  }\r\n})();\r\n"]},"metadata":{},"sourceType":"module"}