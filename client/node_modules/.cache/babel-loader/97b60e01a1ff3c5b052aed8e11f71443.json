{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Evalds\\\\Documents\\\\Portfolio_1\\\\client\\\\src\\\\context\\\\admin\\\\AdminState.js\";\nimport { ADMIN_ERROR, CREATE_PRODUCT, CLEAR_ADMIN_ERRORS } from '../types';\nimport React, { useReducer } from 'react';\nimport AdminContext from './adminContext';\nimport adminReducer from './adminReducer';\nimport axios from 'axios';\naxios.defaults.withCredentials = true;\n\nconst AdminState = props => {\n  const initialState = {\n    adminError: null,\n    createdProduct: null,\n    loading: true\n  };\n  const [state, dispatch] = useReducer(adminReducer, initialState); ///////////////////////////////////////////////////////////////////////////////////////////////////////\n  //////////// Admin\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////\n  //Create product\n\n  const createProduct = async formData => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const res = await axios.post('/api/v1/admin/products/create', formData, config);\n      dispatch({\n        type: CREATE_PRODUCT,\n        payload: res.data.data\n      });\n    } catch (error) {\n      dispatch({\n        type: ADMIN_ERROR,\n        payload: error.response.data\n      });\n      clearErrors();\n    }\n  }; //Add Product Images\n\n\n  const addImages = async (formData, id) => {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    };\n\n    try {\n      const res = await axios.post(`/api/v1/admin/products/${id}/addimages`, formData, config);\n      dispatch({\n        type: CREATE_PRODUCT,\n        payload: res.data.data\n      });\n    } catch (error) {\n      dispatch({\n        type: ADMIN_ERROR,\n        payload: error.response.data\n      });\n      clearErrors();\n    }\n  };\n\n  const clearErrors = () => {\n    setTimeout(() => dispatch({\n      type: CLEAR_ADMIN_ERRORS\n    }), 5000);\n  };\n\n  return /*#__PURE__*/React.createElement(AdminContext.Provider, {\n    value: {\n      adminError: state.adminError,\n      loading: state.loading,\n      createdProduct: state.createdProduct,\n      createProduct,\n      addImages\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default AdminState;","map":{"version":3,"sources":["C:/Users/Evalds/Documents/Portfolio_1/client/src/context/admin/AdminState.js"],"names":["ADMIN_ERROR","CREATE_PRODUCT","CLEAR_ADMIN_ERRORS","React","useReducer","AdminContext","adminReducer","axios","defaults","withCredentials","AdminState","props","initialState","adminError","createdProduct","loading","state","dispatch","createProduct","formData","config","headers","res","post","type","payload","data","error","response","clearErrors","addImages","id","setTimeout","children"],"mappings":";AAAA,SAASA,WAAT,EAAsBC,cAAtB,EAAsCC,kBAAtC,QAAgE,UAAhE;AACA,OAAOC,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACAA,KAAK,CAACC,QAAN,CAAeC,eAAf,GAAiC,IAAjC;;AACA,MAAMC,UAAU,GAAIC,KAAD,IAAW;AAC5B,QAAMC,YAAY,GAAG;AACnBC,IAAAA,UAAU,EAAE,IADO;AAEnBC,IAAAA,cAAc,EAAE,IAFG;AAGnBC,IAAAA,OAAO,EAAE;AAHU,GAArB;AAMA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBb,UAAU,CAACE,YAAD,EAAeM,YAAf,CAApC,CAP4B,CAQ5B;AACA;AACA;AACA;;AACA,QAAMM,aAAa,GAAG,MAAOC,QAAP,IAAoB;AACxC,UAAMC,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AADI,KAAf;;AAKA,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMf,KAAK,CAACgB,IAAN,CAChB,+BADgB,EAEhBJ,QAFgB,EAGhBC,MAHgB,CAAlB;AAMAH,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAEvB,cAAR;AAAwBwB,QAAAA,OAAO,EAAEH,GAAG,CAACI,IAAJ,CAASA;AAA1C,OAAD,CAAR;AACD,KARD,CAQE,OAAOC,KAAP,EAAc;AACdV,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAExB,WAAR;AAAqByB,QAAAA,OAAO,EAAEE,KAAK,CAACC,QAAN,CAAeF;AAA7C,OAAD,CAAR;AACAG,MAAAA,WAAW;AACZ;AACF,GAlBD,CAZ4B,CA+B5B;;;AACA,QAAMC,SAAS,GAAG,OAAOX,QAAP,EAAiBY,EAAjB,KAAwB;AACxC,UAAMX,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AADI,KAAf;;AAMA,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMf,KAAK,CAACgB,IAAN,CACf,0BAAyBQ,EAAG,YADb,EAEhBZ,QAFgB,EAGhBC,MAHgB,CAAlB;AAMAH,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAEvB,cAAR;AAAwBwB,QAAAA,OAAO,EAAEH,GAAG,CAACI,IAAJ,CAASA;AAA1C,OAAD,CAAR;AACD,KARD,CAQE,OAAOC,KAAP,EAAc;AACdV,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAExB,WAAR;AAAqByB,QAAAA,OAAO,EAAEE,KAAK,CAACC,QAAN,CAAeF;AAA7C,OAAD,CAAR;AACAG,MAAAA,WAAW;AACZ;AACF,GAnBD;;AAqBA,QAAMA,WAAW,GAAG,MAAM;AACxBG,IAAAA,UAAU,CAAC,MAAMf,QAAQ,CAAC;AAAEO,MAAAA,IAAI,EAAEtB;AAAR,KAAD,CAAf,EAA+C,IAA/C,CAAV;AACD,GAFD;;AAGA,sBACE,oBAAC,YAAD,CAAc,QAAd;AACE,IAAA,KAAK,EAAE;AACLW,MAAAA,UAAU,EAAEG,KAAK,CAACH,UADb;AAELE,MAAAA,OAAO,EAAEC,KAAK,CAACD,OAFV;AAGLD,MAAAA,cAAc,EAAEE,KAAK,CAACF,cAHjB;AAILI,MAAAA,aAJK;AAKLY,MAAAA;AALK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASGnB,KAAK,CAACsB,QATT,CADF;AAaD,CArED;;AAuEA,eAAevB,UAAf","sourcesContent":["import { ADMIN_ERROR, CREATE_PRODUCT, CLEAR_ADMIN_ERRORS } from '../types';\r\nimport React, { useReducer } from 'react';\r\nimport AdminContext from './adminContext';\r\nimport adminReducer from './adminReducer';\r\nimport axios from 'axios';\r\naxios.defaults.withCredentials = true;\r\nconst AdminState = (props) => {\r\n  const initialState = {\r\n    adminError: null,\r\n    createdProduct: null,\r\n    loading: true,\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(adminReducer, initialState);\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////\r\n  //////////// Admin\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////\r\n  //Create product\r\n  const createProduct = async (formData) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n    try {\r\n      const res = await axios.post(\r\n        '/api/v1/admin/products/create',\r\n        formData,\r\n        config\r\n      );\r\n\r\n      dispatch({ type: CREATE_PRODUCT, payload: res.data.data });\r\n    } catch (error) {\r\n      dispatch({ type: ADMIN_ERROR, payload: error.response.data });\r\n      clearErrors();\r\n    }\r\n  };\r\n  //Add Product Images\r\n  const addImages = async (formData, id) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `/api/v1/admin/products/${id}/addimages`,\r\n        formData,\r\n        config\r\n      );\r\n\r\n      dispatch({ type: CREATE_PRODUCT, payload: res.data.data });\r\n    } catch (error) {\r\n      dispatch({ type: ADMIN_ERROR, payload: error.response.data });\r\n      clearErrors();\r\n    }\r\n  };\r\n\r\n  const clearErrors = () => {\r\n    setTimeout(() => dispatch({ type: CLEAR_ADMIN_ERRORS }), 5000);\r\n  };\r\n  return (\r\n    <AdminContext.Provider\r\n      value={{\r\n        adminError: state.adminError,\r\n        loading: state.loading,\r\n        createdProduct: state.createdProduct,\r\n        createProduct,\r\n        addImages,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AdminContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AdminState;\r\n"]},"metadata":{},"sourceType":"module"}